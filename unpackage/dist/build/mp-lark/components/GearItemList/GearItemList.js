"use strict";var e=require("../../common/vendor.js"),a=require("../../composables/UseGear.js"),s=require("../../composables/UseSelectList.js"),o=require("../../common/apis/fav.js"),r=require("../../composables/UseToken.js");require("../../common/apis/assets.js"),require("../../common/http/index.js"),require("../../common/apis/borrow.js"),Math||(u+n+t)();const t=()=>"../Drawder/Drawder.js",n=()=>"../OrderItem/OrderItem.js",u=()=>"../GearInfoView/GearInfoView.js",l=e.defineComponent({setup(t){const{isAdmin:n}=r.UseToken(),{nowType:u,getBookInfo:l,nowGearList:c}=a.UseGear(),{selectedGears:i,addItem:d,removeItem:f}=s.UseSelectList(),v=e.ref(null),m=e.ref(),p=e.ref();e.watch(c,(e=>{for(let a=0;a<i.value.length;a++){const s=i.value[a];for(let a=0;a<e.length;a++){const o=e[a];s._id==o._id&&(o.selected=!0)}}}));const b=()=>{console.log("gear",m.value),"收藏"==u.value?o.removeFav(m.value._id).then((()=>{e.uni.showToast({title:"已取消"})})):o.addFav(m.value._id).then((()=>{e.uni.showToast({title:"已收藏"})}))},g=()=>{e.uni.setStorage({data:[m.value],key:"selectedGears",success:()=>{e.uni.navigateTo({url:"/pages/BookGears/BookGears"})}})};return(s,o)=>e.e({a:e.f(e.unref(c),((s,o,r)=>({a:e.t(s.name),b:s.status==e.unref(a.GearStatus).free?1:"",c:s.status==e.unref(a.GearStatus).booked?1:"",d:s.status==e.unref(a.GearStatus).lend?1:"",e:e.o((e=>(e=>{e.selected=!e.selected,e.selected?d(e):f(e)})(s))),f:s.selected?"":"#F4F6F7",g:s._id,h:s,i:e.o((e=>(e=>{console.log("gear",e),console.log("barcode",e.barcode),v.value.openDrawer(),m.value=e,l(e.barcode).then((e=>{p.value=e}))})(s)))}))),b:m.value},m.value?{c:e.p({gear:m.value}),d:e.f(p.value,((a,s,o)=>({a:a._id,b:"10b39a20-2-"+o+",10b39a20-0",c:e.p({info:a})}))),e:e.t("收藏"==e.unref(u)?"取消收藏":"收藏"),f:e.o(b),g:e.t(e.unref(n)?"立即借出":"预约"),h:e.o(g)}:{},{i:e.sr(v,"10b39a20-0",{k:"drawerRef"})})}});var c=e._export_sfc(l,[["__scopeId","data-v-10b39a20"]]);tt.createComponent(c);
